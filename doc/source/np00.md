# 无痛苦Numpy手册-00

> author: Roy Kid

> contact: lijichen365@126.com

> date: 2021-03-14

> version: 0.0.1

## 为什么选Numpy？

* 快
* 方便
* 用得人多

## 为什么快？

* 就是快

## 安装

```bash
python3 -m pip install numpy
```

## 上手

核心: `numpy.ndarray`
当我们有一个数据类型是`np.float64`的`(n,m,q)`大小的矩阵：

|属性  |描述  |返回值  |
|:---------:|:---------:|:---------:|
|`ndarray.ndim `    |  返回轴的数量，也就是维数   |    ` 3`     |
|`ndarray.shape `   |   返回具体的维数   |     `（n,m,q）`    |
|`ndarray.size   `  |    返回元素的个数     |    `n x m x q`     |
|`ndarray.dtype  `  | 返回数据类型    |   e.g. `np.float64`     |
|`ndarray.itemsize `| 返回元素的储存大小 | 8字节`(64/8)` |

## 创建


|接口  | 示例 |描述   |
|---------|---------|---------|
|`np.array()  `   |  `   np.array([1,2,3])  `  |  生成一维ndarray     |
|`np.zeros()  `   | `  np.zeros((3,4))  `   |  生成`(3x4)`元素为`0`的ndarray    |
|`np.ones()   `  | `   np.zeros((3,4)) `    |  生成`(3x4)`元素为`1`的ndarray   |
|`np.empty()   `  | `   np.empty((3,4)) `  | 生成`(3x4)`元素为`未初始值`的array |
|`np.arrang()   `  | ` np.arrang(10,30,5)`  | 和`range()`一样生成数列  |
|`np.fromfunction() `| `np.fromfunction(lambda x : x**x, (3,4))`| 根据函数创建数组 |

## 打印

* 直接`print()`
* 如果显示不开省略了: `np.set_printoptions(threshold=sys.maxsize)`

## 操作

* **直接操作**是元素级进行操作:

```python
# 加减乘除同理
a = np.array([1,1,1,1])
b = np.arange([2,2,2,2])
c = a + b

>>> c = array([3, 3, 3, 3])
```

* 如果是标量乘以array, 则会"扩散"(**广播**, boardcast)到所有元素上:
```python
d = 3 * a

>>> d = array([3, 3, 3, 3])

e = a < 2

>>> e = array([True, True, True, True])
```

* **矩阵乘法**奇怪一点:

```python

X = np.array([[1,2], [3,4]])
Y = np.array([[2,3], [4,5]])

X @ Y = X.dot(Y)
```

> `+=`这种复合赋值运算符一样可以用

* **一元操作**

| 方法 | 描述 |
| --- | --- |
| a.sum() | 求和 |
| b.min() | 求最小 |
| c.cumsum() | 累加 |

可以用axis指定计算进行的方向
```python
b = array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])

>>> b.sum(axis=0)                            # sum of each column
array([12, 15, 18, 21])

>>> b.min(axis=1)                            # min of each row
array([0, 4, 8])

>>> b.cumsum(axis=1)                         # cumulative sum along each row
array([[ 0,  1,  3,  6],
       [ 4,  9, 15, 22],
       [ 8, 17, 27, 38]])
```

* [通用函数](https://numpy.org/doc/stable/user/quickstart.html#universal-functions)

|  |  |  |  |  | 
| :---: | :---: | :---: | :---: | :---: |
| all | any | apply_along_axis | argmax | argmin |
|argsort| average| bincount| ceil| clip|
| conj| corrcoef| cov| cross| cumprod|
| cumsum| diff| dot| floor| inner|
| lexsort| max| maximum| mean| median|
| min| minimum| nonzero| outer| prod|
| re| round| sort| std| sum|
| trace| transpose| var| vdot| vectorize|
| where| invert|
|   |   |

* 索引, 切片 和 迭代

1. 一维array的操作和list一样
```python
a = [1,2,3,4,5]
# a = np.array(a)
a[ : :2]

>>> [1,3,5]
```
1. 多维array

